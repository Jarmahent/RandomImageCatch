
<html>
<meta charset="UTF-8">
<head>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<title>Reddit Wallpapers</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
	</head>

	<body>
		<style>
		#getsubreddit{
			margin: 10px;
		}
		</style>
		<h1 align="center"><b>Wallpapers</b></h1>
		<div class="w3-container" id="div1">
			<img class="center fit w3-card-4" id="img" src="http://i.imgur.com/nxFVO.jpg" width="500" height="500"></div>
		<input type="text" id="subreddit" placeholder="Subreddit">
		<button  id="getsubreddit">Get Random Image</button>

		<script>
		document.getElementById('getsubreddit').addEventListener('click', function(e) {
			e.preventDefault();
			var request = new XMLHttpRequest();
			var subreddit = document.getElementById("subreddit").value;
			var data = JSON.stringify({"subreddit": subreddit});

			request.open('POST', '/randomImage', true);
			request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
			request.send(data);
			request.onreadystatechange = function(){
				if(request.readyState === 4 && request.status === 200){
					let url = JSON.parse(request.responseText)
					console.log(url);
					document.getElementById('img').src = url.url

				}
			}
	});
		</script>

	</body>
</html>
